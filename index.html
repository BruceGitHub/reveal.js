<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>API contracts - Leveraging OpenAPI during API development - Alessandro Lai</title>
    <meta name="description" content="{{ Descrizione }}">
    <meta name="author" content="Alessandro Lai">

    <link rel="stylesheet" href="dist/reset.css">
    <link rel="stylesheet" href="dist/reveal.css">
    <link rel="stylesheet" href="dist/theme/facile-engineering.css" id="theme">
    <link type="image/x-icon" rel="shortcut icon" href="img/favicon.ico"/>

    <!-- Theme used for syntax highlighted code -->
    <link rel="stylesheet" href="css/fixes.css">
    <link rel="stylesheet" href="plugin/highlight/monokai.css" id="highlight-theme">
</head>
<body>
<div class="reveal">
    <div class="slides">
        <section id="title" data-background-image="img/theme/bg-cover.svg">
            <h1 style="white-space: nowrap">API contracts</h1>
            <h3>Leveraging OpenAPI during API development</h3>
            <p>
                <a target="_blank" href="https://alessandrolai.dev/">Alessandro Lai</a> / <a target="_blank" href="http://twitter.com/AlessandroLai">@AlessandroLai</a><br>
            </p>
            <small>
                <p>
                    <a target="_blank" href="{{ event-link }}">sfday Italy @localhost</a> - May 13th 2021,
                    Online
                </p>
                <p class="smaller">
                    <a target="_blank" href="https://joind.in/talk/TODO-CHANGEME">https://joind.in/talk/TODO-CHANGEME</a>
                </p>
            </small>
        </section>

        <section id="intro">
            <section>
                <h2>Who am I?</h2>
                <img src="img/github_avatar.jpg" class="avatar stretch">
                <div style="float: right">
                    <ul class="fa-ul">
                        <li><span class="fa-li"><i class="fas fa-user"></i></span>Alessandro Lai</li>
                        <li>
                            <span class="fa-li"><i class="fas fa-desktop"></i></span>
                            Team lead developer @ Facile.it
                        </li>
                        <li>
                            <span class="fa-li"><i class="fab fa-github"></i></span>
                            <a target="_blank" href="https://github.com/Jean85">@Jean85</a>
                        </li>
                        <li>
                            <span class="fa-li"><i class="fab fa-twitter"></i></span>
                            <a target="_blank" href="https://twitter.com/AlessandroLai">@AlessandroLai</a>
                        </li>
                        <li>
                            <span class="fa-li"><i class="fas fa-users"></i></span>
                            PHP UG Milan Coordinator
                        </li>
                        <li>
                            <span class="fa-li">
                                <i class="fas fa-certificate"></i>
                            </span>
                            PHP-FIG Secretary
                        </li>
                    </ul>
                </div>
            </section>
        </section>

        <section>
            <section>
                <h3>APIs: the language of web apps</h3>
                <p>
                    APIs are the "common language" of web development
                </p>
                <ul class="fa-ul">
                    <li>
                        <span class="fa-li"><i class="fas fa-arrow-alt-circle-right"></i></span>
                        Frontend to backend
                    </li>
                    <li>
                        <span class="fa-li"><i class="fas fa-arrow-alt-circle-right"></i></span>
                        Mobile to backend
                    </li>
                    <li>
                        <span class="fa-li"><i class="fas fa-arrow-alt-circle-right"></i></span>
                        Between different applications <br>
                        <small>(microservices)</small>
                    </li>
                    <li>
                        <span class="fa-li"><i class="fas fa-arrow-alt-circle-right"></i></span>
                        Between different companies <br>
                        <small>(SaaS, API monetization...)</small>
                    </li>
                </ul>
            </section>
            <section>
                <h3>Working between projects</h3>
                <p>
                    If you don't have a monorepo, you'll need a way to describe what your APIs does and how it does it
                </p>
            </section>
            <section>
                <h3>Design by contract &trade;</h3>
                <blockquote style="width: 100%; font-size: smaller">
                    Design by contract is an approach for designing software. <br/>
                    <span class="fragment">
                        [...] software designers should define <b>formal, precise and verifiable<br/>
                        interface specifications</b> for software components,<br/>
                    </span>
                    <span class="fragment">[...] all client components that invoke an operation on a server component will meet the preconditions [...]<br/></span>
                    <span class="fragment">[Otherwise] the inverse approach is taken, meaning that the server component tests that all relevant preconditions hold true...</span>
                </blockquote>
                <small>From <a target="_blank" href="https://en.wikipedia.org/wiki/Design_by_contract">Wikipedia</a></small>
                <p class="fragment">Which language to use? Which format?</p>
            </section>
        </section>
        <section>
            <section>
                <h3>OpenAPI 3</h3>
                <img class="stretch" src="img/openapi3.png" alt="OpenAPI specification heading" /><br/>
                <small><a target="_blank" href="https://swagger.io/specification/">OpenAPI specification</a></small>
            </section>
            <section>
                <h3>OpenAPI (the old Swagger)</h3>
                <img class="stretch" src="img/swagger_ui.png" alt="Swagger UI" />
                <small><a target="_blank" href="https://swagger.io/tools/swagger-ui/">Swagger UI</a></small>
            </section>
            <section>
                <h3>Beware, here be YAML</h3>
                <pre class="stretch"><code>openapi: 3.0.3
info:
  title: Test API for Facile.it
  version: '1.0'
  description: Description of the APIs
  contact:
    name: Alessandro Lai
servers:
  - url: 'https://openapi.facile.it'
    description: Prod
paths:
  /api/test:
    get:
      summary: Get the test information
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  foo:
                    # ...</code></pre>
            </section>
        </section>
        <section>
            <section>
                <div class="stretch">
                    <h3>StopLight (Studio)</h3>
                    <img src="img/stoplight-studio.png" alt="OpenAPI specification heading" style="float: left; width: 55%"/>
                    <ul class="fa-ul">
                        <li class="fragment" style="margin: 1em 0">
                            <span class="fa-li"><i class="fas fa-plus-square"></i></span>
                            Prism<br/>
                            <small>
                                <i class="fab fa-github"></i>
                                <a target="_blank" href="https://github.com/stoplightio/prism">https://github.com/stoplightio/prism</a>
                                <br/>
                                Mock server
                            </small>
                        </li>
                        <li class="fragment">
                            <span class="fa-li"><i class="fas fa-plus-square"></i></span>
                            Spectral<br/>
                            <small>
                                <i class="fab fa-github"></i>
                                <a target="_blank" href="https://github.com/stoplightio/spectral">https://github.com/stoplightio/spectral</a>
                                <br/>
                                OpenAPI spec validation
                            </small>
                        </li>
                    </ul>
                </div>
                <small><a target="_blank" href="https://swagger.io/specification/">https://stoplight.io/studio/</a></small>
            </section>
            <section>
                <h3>Live demo!</h3>
            </section>
            <section>
                <h3>Credits to this guy...</h3>
                <img src="img/phil-sturgeon.png" alt="Phil Sturgeon Twitter profile" style="float:left; width: 40%"/>
                <ul class="fa-ul" style="padding: 0.5em">
                    <li>
                        <span class="fa-li"><i class="fas fa-fire"></i></span>
                        Core team of <a target="_blank" href="https://codeigniter.com/">CodeIgniter</a>
                    </li>
                    <li>
                        <span class="fa-li"><i class="fas fa-fire"></i></span>
                        <a target="_blank" href="https://pyrocms.com/">PyroCMS</a> founder
                    </li>
                    <li>
                        <span class="fa-li"><i class="fas fa-podcast"></i></span>
                        <a target="_blank" href="https://phptownhall.com/">PHP Town Hall</a> podcast host 
                    </li>
                    <li>
                        <span class="fa-li"><i class="fab fa-php"></i></span>
                        <a target="_blank" href="https://phptherightway.com/">PHP The Right Way</a> core contributor 
                    </li>
                    <li>
                        <span class="fa-li"><i class="fas fa-book"></i></span>
                        Author of <a target="_blank" href="https://apisyouwonthate.com/books/build-apis-you-wont-hate">"API you won't hate"</a> 
                    </li>
                    <li>
                        <span class="fa-li"><i class="fas fa-briefcase"></i></span>
                        ... and now works at <a target="_blank" href="https://stoplight.io">Stoplight.io</a>
                    </li>
                </ul>
            </section>
            <section>
                <h3>OpenApi.tools</h3>
                <p>
                    <a target="_blank" href="https://openapi.tools">
                        <img class="stretch" src="img/openapi-tools.png" alt="Openapi.tools site screenshot" style="display: block"/>
                    </a>
                </p>
            </section>
        </section>
        <section>
            <section><h3>The documentation pitfall: synchronization</h3></section>
            <section><h3>The "bad" approach: Nelmio bundle</h3></section>
        </section>
        <section>
            <section><h3>A better approach: involving the spec in the code</h3></section>
            <section><h3>Using the validator in tests</h3></section>
            <section><h3>Using the spec in production!</h3></section>
            <section><h3>Using validation errors as responses</h3></section>
        </section>
        <section>
            <section><h3>Pitfalls and limitations</h3></section>
        </section>

        <section id="ending">
            <section>
                <h2>Thanks!</h2>
                <p>
                    Please rate my talk on Joind.in: <a target="_blank" href="https://joind.in/talk/TODO-CHANGEME">https://joind.in/talk/TODO-CHANGEME</a>
                </p>
                <img class="stretch" src="img/joindin-qr.png" alt="Joind.in link: https://joind.in/talk/TODO-CHANGEME">
                <aside class="notes">
                    45:00
                </aside>
            </section>
            <section>
                <h2>Contacts</h2>
                <div style="font-size: smaller">
                    <ul class="fa-ul">                        <li>
                            <span class="fa-li"><i class="fas fa-envelope"></i></span>
                            <a target="_blank" href="mailto:alessandro.lai85@gmail.com">alessandro.lai85@gmail.com</a>
                        </li>

                        <li>
                            <span class="fa-li"><i class="fas fa-envelope"></i></span>
                            <a target="_blank" href="mailto:alessandro.lai85@gmail.com">alessandro.lai85@gmail.com</a>
                        </li>
                        <li>
                            <span class="fa-li"><i class="fas fa-envelope"></i></span>
                            <a target="_blank" href="mailto:alessandro.lai@facile.it">alessandro.lai@facile.it</a>
                            <small style="vertical-align: middle">(we are hiring!)</small>
                        </li>
                        <li>
                            <span class="fa-li"><i class="fab fa-github"></i></span>
                            <a target="_blank" href="https://github.com/Jean85">@Jean85</a>
                        </li>
                        <li>
                            <span class="fa-li"><i class="fab fa-twitter"></i></span>
                            <a target="_blank" href="https://twitter.com/AlessandroLai">@AlessandroLai</a>
                        </li>
                    </ul>
                </div>
                <div style="clear: both; padding-top: 1em">
                    <h6>Attributions</h6>
                    <small>
                        <ul class="fa-ul">
                            <li>
                                <span class="fa-li"><i class="fas fa-image"></i></span>
                                <a title="money" href="https://flickr.com/photos/khrawlings/3407402643">money</a>,
                                flickr photo by
                                <a target="_blank" href="https://flickr.com/people/khrawlings">khrawlings</a>
                                shared under a
                                <a target="_blank" href="https://creativecommons.org/licenses/by-nc/2.0/">Creative Commons (BY-NC)
                                    license</a>
                            </li>
                        </ul>
                    </small>
                </div>
            </section>
            <section>
                <h2>Questions?</h2>
            </section>
        </section>
    </div>
</div>

<script src="dist/reveal.js"></script>
<script src="plugin/notes/notes.js"></script>
<script src="plugin/markdown/markdown.js"></script>
<script src="plugin/highlight/highlight.js"></script>
<script src="plugin/zoom/zoom.js"></script>
<script>
    // More info about initialization & config:
    // - https://revealjs.com/initialization/
    // - https://revealjs.com/config/
    Reveal.initialize({
        hash: true,
        width: 1160,
        height: 720,
        // Learn about plugins: https://revealjs.com/plugins/
        plugins: [
            RevealMarkdown,
            RevealHighlight,
            RevealNotes,
            RevealZoom
        ]
    });
</script>
</body>
</html>
